# PRD: Dental X-Ray Navigator

## 1. 概要

### 1.1 プロダクト名
Dental X-Ray Navigator（歯科X線撮影ナビゲーター）

### 1.2 ステータス
開発中（プロトタイプ段階）

### 1.3 最終更新
2026-02-05

---

## 2. 背景と目的

### 2.1 背景
<!-- TODO: 現状の業務フローの課題を記載 -->
- 現状の業務フローでどのような問題が発生しているか？
- なぜこのアプリが必要になったか？

### 2.2 目的
歯科医院のX線撮影業務を効率化し、以下の問題を解決する：

1. **撮影待ち患者の管理** - 誰がどの撮影を待っているか把握できない
2. **照射録の記録・管理** - 紙での記録が煩雑、後から探しにくい
3. **保険点数の集計** - 手計算で時間がかかる、ミスが発生する

### 2.3 ゴール
<!-- TODO: 定量的な成功指標を記載 -->
- [ ] 撮影依頼の抜け漏れをゼロにする
- [ ] 照射録の記録時間を短縮する
- [ ] 月次の点数集計を自動化する

---

## 3. ターゲットユーザー

### 3.1 主要ユーザー

| ユーザー | 役割 | 主な利用シーン |
|----------|------|----------------|
| 歯科診療放射線技師 | X線撮影の実施 | 依頼確認、照射録入力、撮影完了 |
| 歯科衛生士 | 撮影補助 | 依頼確認、患者案内 |

### 3.2 その他のステークホルダー

| ユーザー | 役割 | 主な利用シーン |
|----------|------|----------------|
| 歯科医師 | 撮影依頼を出す | （現状は対象外？） |
| 受付スタッフ | 患者管理 | （現状は対象外？） |
| 院長・管理者 | 実績確認 | 月次の点数集計確認 |

<!-- TODO: 歯科医師・受付の利用有無を確認 -->

---

## 4. 運用形態

| 項目 | 内容 |
|------|------|
| 導入先 | 1医院（内製ツール） |
| 利用デバイス | iPad、PC |
| ネットワーク | 院内Wi-Fi |
| 同時利用人数 | 2-3名程度 |

---

## 5. 機能要件

### 5.1 撮影待ち患者管理

#### 必須機能（MVP）
| ID | 機能 | 実装状況 |
|----|------|----------|
| F1-1 | 撮影依頼の作成 | ✅ 実装済 |
| F1-2 | 待機中タスクの一覧表示 | ✅ 実装済 |
| F1-3 | 患者情報の自動入力（ID検索） | ✅ 実装済 |
| F1-4 | 撮影種別の選択（7種類） | ✅ 実装済 |
| F1-5 | 予約日時・移動先の指定 | ✅ 実装済 |
| F1-6 | セッション永続化（リロード対応） | ❌ 未実装 |

#### あると良い機能
| ID | 機能 | 実装状況 |
|----|------|----------|
| F1-7 | 撮影順序・緊急度の表示 | ❌ 未実装 |
| F1-8 | 新規依頼の通知 | ❌ 未実装 |

---

### 5.2 照射録の記録・管理

#### 必須機能（MVP）
| ID | 機能 | 実装状況 |
|----|------|----------|
| F2-1 | 照射条件の入力（kV/mA/sec） | ✅ 実装済 |
| F2-2 | 被曝テンプレートの自動適用 | ✅ 実装済 |
| F2-3 | 担当者名の記録 | ✅ 実装済 |
| F2-4 | 撮影完了履歴の表示 | ✅ 実装済 |
| F2-5 | 患者別の撮影履歴表示 | ❌ 未実装 |
| F2-6 | 照射録の検索・フィルタリング | ❌ 未実装 |

#### あると良い機能
| ID | 機能 | 実装状況 |
|----|------|----------|
| F2-7 | 照射録の印刷機能 | ❌ 未実装 |
| F2-8 | PACS連携（撮影画像との紐付け） | ❌ 未実装 |

---

### 5.3 保険点数の集計

#### 必須機能（MVP）
| ID | 機能 | 実装状況 |
|----|------|----------|
| F3-1 | 依頼時の点数自動計算 | ✅ 実装済 |
| F3-2 | 本日の点数合計表示 | ✅ 実装済 |
| F3-3 | 撮影種別シェアの可視化 | ✅ 実装済 |
| F3-4 | 期間指定の点数集計 | ❌ 未実装 |
| F3-5 | CSV/PDF出力 | ❌ 未実装 |

#### あると良い機能
| ID | 機能 | 実装状況 |
|----|------|----------|
| F3-6 | 点数マスタの管理画面 | ❌ 未実装 |
| F3-7 | レセコン連携 | ❌ 未実装 |

---

## 6. 非機能要件

### 6.1 ユーザビリティ
| ID | 要件 | 優先度 |
|----|------|--------|
| NF1-1 | ログインが1日1回で済む | 高 |
| NF1-2 | タスク一覧が一目で把握できる | 高 |
| NF1-3 | 照射条件の入力が10秒以内で完了 | 中 |
| NF1-4 | iPad縦持ちで操作可能 | 中 |

### 6.2 パフォーマンス
| ID | 要件 | 優先度 |
|----|------|--------|
| NF2-1 | 画面遷移が1秒以内 | 中 |
| NF2-2 | 1000件のデータで遅延なし | 低 |

### 6.3 セキュリティ
| ID | 要件 | 優先度 |
|----|------|--------|
| NF3-1 | 患者データへのアクセス制御 | 中 |
| NF3-2 | 通信の暗号化（HTTPS） | 中 |

### 6.4 可用性
| ID | 要件 | 優先度 |
|----|------|--------|
| NF4-1 | 営業時間中は常時利用可能 | 高 |
| NF4-2 | ネットワーク障害時も一時的に動作 | 低 |

---

## 7. 制約・前提条件

### 7.1 技術的制約
- フロントエンド: React + TypeScript
- バックエンド: Firebase Firestore
- ホスティング: Firebase Hosting

### 7.2 運用上の制約
- 1医院のみで使用（マルチテナント不要）
- インターネット接続が前提

### 7.3 前提条件
- 患者IDは既存システム（レセコン等）と同じものを使用
- 保険点数は診療報酬改定時に手動更新

---

## 8. 用語集

| 用語 | 説明 |
|------|------|
| 照射録 | X線撮影時の条件（kV/mA/sec）と担当者を記録したもの |
| 被曝テンプレート | 患者の年齢・体格に応じた照射条件の推奨値 |
| FDI歯番号 | 国際歯科連盟の歯番号システム（11-48） |
| BITEWING | 咬翼法撮影（左右それぞれ撮影） |
| PACS | 医用画像管理システム |
| レセコン | 診療報酬請求用コンピュータ |

---

## 9. 関連ドキュメント

- [ISSUES_APP.md](./ISSUES_APP.md) - アプリケーション課題一覧
- [ISSUES_ORG.md](./ISSUES_ORG.md) - 組織・業務課題一覧
- [CLAUDE.md](./CLAUDE.md) - 開発ガイドライン

---

## 10. 更新履歴

| 日付 | 内容 |
|------|------|
| 2026-02-05 | 初版作成 |
